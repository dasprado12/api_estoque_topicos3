{"ast":null,"code":"import _regeneratorRuntime from\"/home/prado/Desktop/unb/topicos/api_estoque_topicos3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/prado/Desktop/unb/topicos/api_estoque_topicos3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/prado/Desktop/unb/topicos/api_estoque_topicos3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{useEffect,useState}from\"react\";import{FaSpinner}from\"react-icons/fa\";import{useHistory}from\"react-router-dom\";import{Button}from\"./styles\";import Card from\"../components/Card\";import EditModal from\"../components/EditModal\";import api from\"../api\";var Home=function Home(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setOpen=_useState4[1];var history=useHistory();var requestData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(\"/produtos\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});case 3:response=_context.sent;setItems(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log({error:_context.t0});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function requestData(){return _ref.apply(this,arguments);};}();var logout=function logout(){localStorage.removeItem(\"token\");history.push(\"/\");};useEffect(function(){requestData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Lista de produtos \"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setOpen(true);},children:\" Criar produto \"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return logout();},children:\"Logout\"}),/*#__PURE__*/_jsx(EditModal,{isOpen:isOpen,onRequestClose:function onRequestClose(){return setOpen(false);},isCreate:true}),items?items.map(function(item){return/*#__PURE__*/_jsx(Card,{item:item,isOpen:isOpen,setOpen:setOpen,isCreate:true});}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Carregando \",/*#__PURE__*/_jsx(FaSpinner,{})]})})]});};export default Home;","map":{"version":3,"sources":["/home/prado/Desktop/unb/topicos/api_estoque_topicos3/src/pages/Home.js"],"names":["useEffect","useState","FaSpinner","useHistory","Button","Card","EditModal","api","Home","items","setItems","isOpen","setOpen","history","requestData","get","headers","Authorization","localStorage","getItem","response","data","console","log","error","logout","removeItem","push","map","item"],"mappings":"2oBAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,gBAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,OAASC,MAAT,KAAuB,UAAvB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,eAESP,QAAQ,CAAC,IAAD,CAFjB,wCAEVQ,KAFU,eAEHC,QAFG,8BAGST,QAAQ,CAAC,IAAD,CAHjB,yCAGVU,MAHU,eAGFC,OAHE,eAIjB,GAAMC,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CAEA,GAAMW,CAAAA,WAAW,0FAAG,sLAGOP,CAAAA,GAAG,CAACQ,GAAJ,CAAQ,WAAR,CAAsB,CAAEC,OAAO,CAAE,CAAEC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CAAf,CAAX,CAAtB,CAHP,QAGVC,QAHU,eAIhBV,QAAQ,CAACU,QAAQ,CAACC,IAAV,CAAR,CAJgB,+EAOhBC,OAAO,CAACC,GAAR,CAAY,CAAEC,KAAK,YAAP,CAAZ,EAPgB,oEAAH,kBAAXV,CAAAA,WAAW,0CAAjB,CAWA,GAAMW,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBP,YAAY,CAACQ,UAAb,CAAwB,OAAxB,EACAb,OAAO,CAACc,IAAR,CAAa,GAAb,EACD,CAHD,CAKA3B,SAAS,CAAC,UAAM,CACdc,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,oCACE,2CADF,cAEE,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMF,CAAAA,OAAO,CAAC,IAAD,CAAb,EAAjB,6BAFF,cAGE,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMa,CAAAA,MAAM,EAAZ,EAAjB,oBAHF,cAIE,KAAC,SAAD,EACE,MAAM,CAAEd,MADV,CAEE,cAAc,CAAE,gCAAMC,CAAAA,OAAO,CAAC,KAAD,CAAb,EAFlB,CAGE,QAAQ,CAAE,IAHZ,EAJF,CAUGH,KAAK,CACJA,KAAK,CAACmB,GAAN,CAAU,SAACC,IAAD,qBACR,KAAC,IAAD,EAAM,IAAI,CAAEA,IAAZ,CAAkB,MAAM,CAAElB,MAA1B,CAAkC,OAAO,CAAEC,OAA3C,CAAoD,QAAQ,CAAE,IAA9D,EADQ,EAAV,CADI,cAKJ,sCACE,gDACa,KAAC,SAAD,IADb,GADF,EAfJ,GADF,CAwBD,CAlDD,CAoDA,cAAeJ,CAAAA,IAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { FaSpinner } from \"react-icons/fa\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { Button } from \"./styles\";\n\nimport Card from \"../components/Card\";\nimport EditModal from \"../components/EditModal\";\n\nimport api from \"../api\";\n\nconst Home = () => {\n\n  const [items, setItems] = useState(null);\n  const [isOpen, setOpen] = useState(null);\n  const history = useHistory();\n\n  const requestData = async () => {\n    try {\n      \n      const response = await api.get(\"/produtos\" , { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } } );\n      setItems(response.data);\n      \n    } catch (error) {\n      console.log({ error });\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"token\")\n    history.push(\"/\");\n  }\n\n  useEffect(() => {\n    requestData();\n  }, []);\n\n  return (\n    <div>\n      <h1> Lista de produtos </h1>\n      <Button onClick={() => setOpen(true)}> Criar produto </Button>\n      <Button onClick={() => logout()}>Logout</Button>\n      <EditModal\n        isOpen={isOpen}\n        onRequestClose={() => setOpen(false)}\n        isCreate={true}\n      />\n      {/* Trocar arrayTest por items e verificar nome das chaves no json */}\n      {items ? (\n        items.map((item) => (\n          <Card item={item} isOpen={isOpen} setOpen={setOpen} isCreate={true} />\n        ))\n      ) : (\n        <>\n          <p>\n            Carregando <FaSpinner />\n          </p>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}