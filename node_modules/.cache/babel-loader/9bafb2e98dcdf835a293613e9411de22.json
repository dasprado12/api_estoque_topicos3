{"ast":null,"code":"import _regeneratorRuntime from\"/home/prado/Desktop/unb/topicos/api_estoque_topicos3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/prado/Desktop/unb/topicos/api_estoque_topicos3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/prado/Desktop/unb/topicos/api_estoque_topicos3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{useState}from\"react\";import Modal from\"react-modal\";import{useForm}from\"react-hook-form\";import{AiFillDelete}from\"react-icons/ai\";import{useHistory}from\"react-router-dom\";import api from\"../api\";import{Input,Label,Button,ErrorMsg}from\"./styles\";var customStyles={content:{top:\"50%\",left:\"50%\",right:\"auto\",bottom:\"auto\",marginRight:\"-50%\",transform:\"translate(-50%, -50%)\"}};var EditModal=function EditModal(_ref){var isOpen=_ref.isOpen,onRequestClose=_ref.onRequestClose,_ref$item=_ref.item,item=_ref$item===void 0?{}:_ref$item,_ref$isCreate=_ref.isCreate,isCreate=_ref$isCreate===void 0?false:_ref$isCreate;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setMsg=_useState2[1];// Se a chave não for ID trocar\nvar nome=item.nome,descricao=item.descricao,quantidade=item.quantidade,tipo=item.tipo,preco=item.preco,id=item.id;var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register;var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var response,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isCreate){_context.next=9;break;}_context.next=4;return api.post(\"/produtos\",data,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});case 4:response=_context.sent;window.location.reload();onRequestClose();_context.next=14;break;case 9:_context.next=11;return api.patch(\"/produtos/\".concat(id),data,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});case 11:_response=_context.sent;window.location.reload();onRequestClose();case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);//setMsg(error);\nconsole.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.delete(\"/produtos/\".concat(id),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});case 3:response=_context2.sent;window.location.reload();_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);//setMsg(error);\nconsole.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function handleDelete(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onRequestClose:onRequestClose,style:customStyles,children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Label,{children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(Input,{defaultValue:nome,name:\"nome\",ref:register}),/*#__PURE__*/_jsx(Label,{children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(Input,{defaultValue:descricao,name:\"descricao\",ref:register}),/*#__PURE__*/_jsx(Label,{children:\"Quantidade\"}),/*#__PURE__*/_jsx(Input,{defaultValue:quantidade,name:\"quantidade\",ref:register}),/*#__PURE__*/_jsx(Label,{children:\"Tipo\"}),/*#__PURE__*/_jsx(Input,{defaultValue:tipo,name:\"tipo\",ref:register}),/*#__PURE__*/_jsx(Label,{children:\"Pre\\xE7o\"}),/*#__PURE__*/_jsx(Input,{defaultValue:preco,name:\"preco\",ref:register}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(Button,{children:\"Enviar\"}),msg&&/*#__PURE__*/_jsx(ErrorMsg,{children:msg})]}),/*#__PURE__*/_jsxs(Button,{onClick:handleDelete,marginTop:\"5vh\",color:\"red\",children:[/*#__PURE__*/_jsx(AiFillDelete,{}),\"Deletar\"]})]});};export default EditModal;","map":{"version":3,"sources":["/home/prado/Desktop/unb/topicos/api_estoque_topicos3/src/components/EditModal.js"],"names":["useState","Modal","useForm","AiFillDelete","useHistory","api","Input","Label","Button","ErrorMsg","customStyles","content","top","left","right","bottom","marginRight","transform","EditModal","isOpen","onRequestClose","item","isCreate","msg","setMsg","nome","descricao","quantidade","tipo","preco","id","handleSubmit","register","onSubmit","data","post","headers","Authorization","localStorage","getItem","response","window","location","reload","patch","console","log","handleDelete","delete"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport Modal from \"react-modal\";\nimport { useForm } from \"react-hook-form\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { useHistory } from \"react-router-dom\";\n\nimport api from \"../api\";\n\nimport { Input, Label, Button, ErrorMsg } from \"./styles\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n  },\n};\n\nconst EditModal = ({ isOpen, onRequestClose, item = {}, isCreate = false }) => {\n  const [msg, setMsg] = useState(null);\n  // Se a chave não for ID trocar\n  const { nome, descricao, quantidade, tipo, preco, id } = item;\n  const { handleSubmit, register } = useForm();\n\n  const onSubmit = async (data) => {\n    try {\n      if (isCreate) {\n        const response = await api.post(`/produtos`, data, { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } } );\n        window.location.reload();\n\n        onRequestClose();\n      } else {\n        // Se a chave não for ID trocar\n\n        const response = await api.patch(`/produtos/${id}`, data, { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } } );\n        window.location.reload();\n        onRequestClose();\n      }\n    } catch (error) {\n      //setMsg(error);\n      console.log(error);\n    }\n  };\n\n  const handleDelete = async (data) => {\n    try {\n      // data = {email, pwd}\n      const response = await api.delete(`/produtos/${id}`, { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } } );\n      window.location.reload();\n\n    } catch (error) {\n      //setMsg(error);\n      console.log(error);\n    }\n  };\n\n  return (\n    <Modal isOpen={isOpen} onRequestClose={onRequestClose} style={customStyles}>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <Label>Título</Label>\n        <Input defaultValue={nome} name=\"nome\" ref={register} />\n        <Label>Descrição</Label>\n        <Input defaultValue={descricao} name=\"descricao\" ref={register} />\n        <Label>Quantidade</Label>\n        <Input defaultValue={quantidade} name=\"quantidade\" ref={register} />\n        <Label>Tipo</Label>\n        <Input defaultValue={tipo} name=\"tipo\" ref={register} />\n        <Label>Preço</Label>\n        <Input defaultValue={preco} name=\"preco\" ref={register} />\n        <p />\n        <Button>Enviar</Button>\n        {msg && <ErrorMsg>{msg}</ErrorMsg>}\n      </form>\n      <Button onClick={handleDelete} marginTop=\"5vh\" color=\"red\">\n        <AiFillDelete />\n        Deletar\n      </Button>\n    </Modal>\n  );\n};\n\nexport default EditModal;\n"]},"metadata":{},"sourceType":"module"}